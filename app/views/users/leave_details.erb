<div class="content">
 <div class="container-fluid">
   <div class="row">
     <div class="col-md-12">
        <div class="card">
          <div class="card-header card-header-icon" data-background-color="purple">
            <i class="material-icons">person</i>
          </div>
          <div class="card-content">
            <h1>User Details: <%= @user.full_name %></h1>
            <p>Email: <%= @user.email %></p>
            <p>Paid Leaves: <%= @user.paid_leaves %></p>
            <p>Unpaid Leaves: <%= @user.unpaid_leaves %></p>
            <p>Pending Leave Requests: <%= @user.pending_leaves %></p>
            <p>Approved Upcoming Leaves: <%= @user.approved_upcoming_leaves %></p>
            <p>Remaining Paid Leaves: <%= @user.remaining_monthly_leaves_taken %></p>
            <h2 class="card-title">Leave details </h2>
            <div class="toolbar"> <%= link_to 'Export CSV', export_csv_leave_applications_path(format: :csv), class: 'btn btn-primary' %></div>
            <div class="material-datatables"></div>
            <table id="datatables" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
              <thead>
                <tr>
                  <th>Reason</th>
                  <th>Start Date</th>
                  <th>End Date</th>
                  <th>Type</th>
                  <th>Leave Days</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody>
                <% @leave_applications.each do |leave_application| %>
                  <tr>
                    <td><%= leave_application.reason %></td>
                    <td><%= leave_application.start_date %></td>
                    <td><%= leave_application.end_date %></td>
                    <td><%= leave_application.leave_type.humanize %></td>
                    <td><%= leave_application.leave_days%>
                    <td><%= leave_application.status.humanize %></td>
                  </tr>
                <% end %>
              </tbody>
            </table>

            <h2>Monthly Leave Calendar</h2>
            <% @monthly_leaves.each do |month, leaves| %>
              <h3><%= month.strftime("%B %Y") %></h3>
              <ul>
                <% leaves.each do |leave| %>
                  <li><%= leave.start_date %> to <%= leave.end_date %>: <%= leave.reason %> (<%= leave.leave_type.humanize %>)</li>
                <% end %>
              </ul>
            <% end %>
          </div>
       </div>
      </div>
     </div>
   </div>
</div>


